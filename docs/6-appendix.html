<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.50">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Appendix – The Definitive Guide to the Elastic Certified Engineer Exam v8.1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./references.html" rel="next">
<link href="./5-cluster-management.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./6-appendix.html">Appendix</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">The Definitive Guide to the Elastic Certified Engineer Exam v8.1</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0.1-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0.2-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1-data-management.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Data Management</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2-searching-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Searching Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3-developing-search-applications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Developing Search Applications</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4-data-processing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data Processing</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./5-cluster-management.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Cluster Management</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./6-appendix.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Appendix</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#set-up-your-elastic-cluster" id="toc-set-up-your-elastic-cluster" class="nav-link active" data-scroll-target="#set-up-your-elastic-cluster">Set-up Your Elastic Cluster</a>
  <ul class="collapse">
  <li><a href="#the-elastic-cloud-14-day-free-trial" id="toc-the-elastic-cloud-14-day-free-trial" class="nav-link" data-scroll-target="#the-elastic-cloud-14-day-free-trial">The Elastic Cloud 14-day Free Trial</a></li>
  <li><a href="#local-instance" id="toc-local-instance" class="nav-link" data-scroll-target="#local-instance">Local Instance</a></li>
  <li><a href="#setting-up-an-additional-single-node-cluster-for-cross-cluster-search-ccs" id="toc-setting-up-an-additional-single-node-cluster-for-cross-cluster-search-ccs" class="nav-link" data-scroll-target="#setting-up-an-additional-single-node-cluster-for-cross-cluster-search-ccs">Setting Up An Additional Single-node Cluster for Cross-cluster Search (CCS)</a></li>
  </ul></li>
  <li><a href="#faq" id="toc-faq" class="nav-link" data-scroll-target="#faq">FAQ</a></li>
  <li><a href="#devtools-console-auto-complete" id="toc-devtools-console-auto-complete" class="nav-link" data-scroll-target="#devtools-console-auto-complete">DevTools Console Auto-complete</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Appendix</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="set-up-your-elastic-cluster" class="level2">
<h2 class="anchored" data-anchor-id="set-up-your-elastic-cluster">Set-up Your Elastic Cluster</h2>
<p>If you’re going to learn from the various examples in this study guide it would help to have a running Elastic cluster. You can get one in one of three ways:</p>
<ol type="1">
<li><p>Elastic Cloud</p>
<ol type="1">
<li><p>Access to a paid cluster</p></li>
<li><p>14-day free trial</p></li>
</ol></li>
<li><p>Local instance</p></li>
</ol>
<p>If you have access to a paid Elastic Cloud instance then you can skip the rest of these instructions as you have already been using Elastic to some extent and you can just jump into the exercises.</p>
<p>If you don’t already have an account with Elastic, then the most convenient method is to have a local cluster running on your PC/Mac using Docker or, if you insist, creating a 14-day free trail of Elastic that will run out long before you are ready to give it up. In other words, create a local instance and spare yourself some pain.</p>
<p>Let’s briefly go over the set-up of either:</p>
<ul>
<li><p>the 14-day free trail</p></li>
<li><p>local instance</p></li>
</ul>
<section id="the-elastic-cloud-14-day-free-trial" class="level3">
<h3 class="anchored" data-anchor-id="the-elastic-cloud-14-day-free-trial">The Elastic Cloud 14-day Free Trial</h3>
<p>Once you have signed up for your 14-day trial you will be directed to create your first deployment. Don’t rush it. In the process of creating the new deployment you will be shown:</p>
<ul>
<li><p>the username (<strong>elastic)</strong></p></li>
<li><p>the password (<strong>the usual collection of numbers/letters/punctuation)</strong></p></li>
</ul>
<p><img src="media/image1.png" style="width:6.925in;height:6.64861in"></p>
<blockquote class="blockquote">
<p>Figure N: The Username/Password for use from the Command Line</p>
</blockquote>
<p>Once the deployment is created and you are taken to one of the many landing pages you will need the URL to the Elastic cluster endpoint that will allow you to work with Elasticsearch. The <strong>Elastic cluster endpoint</strong> can be found by:</p>
<blockquote class="blockquote">
<p>1. Pressing the hamburger menu (the three parallel lines) on the top left hand side of the Elastic web page to open the main menu:</p>
<p><img src="media/image2.jpg" style="width:3.07222in;height:2.04167in"></p>
<p>Figure N:</p>
<p>1. Press <strong>Manage This Deployment</strong>. That will take you the <strong>Deployments</strong> page which should list your deployment. There will be a section titled Applications. Click on the <strong>Elasticsearch</strong> link labeled <strong>Copy Endpoint</strong>.</p>
<p><img src="media/image3.jpg" style="width:4.74931in;height:2.98889in"></p>
<p>Figure N:</p>
<p>1. Paste that link somewhere for future use. You’re going to be using it quite a bit. If you lose it just go back to the <strong>Deployments</strong> page and click on the link again.</p>
</blockquote>
</section>
<section id="local-instance" class="level3">
<h3 class="anchored" data-anchor-id="local-instance">Local Instance</h3>
<p>Docker. We are going to use Docker. It is the easiest to clean up when you are done vs.&nbsp;copying github repos, etc.</p>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.13/getting-started.html"><u>instructions on the Elastic site</u></a> explain how to install the Elastic Stack locally using Docker. This book assumes you are using Ubuntu Linux and understand the Linux command line and shell. If you are using another version of Linux then it may be worth looking at the Elastic documentation for the variations (there aren’t many).</p>
<p><strong><em>On The Off-chance You Have already Done This and Need to Reset Everything</em></strong></p>
<p>We know. It happens. You follow all the steps exactly and still need to redo all the steps.</p>
<p>To reset you Elasticsearch install do the following (assuming you have docker installed):</p>
<p>sudo docker stop es01 es02 kibana sudo docker rm es01 es02 kibana sudo docker network rm elastic</p>
<p>You can safelyl start again.</p>
<p><strong><em>Install Docker (if you don’t already have it installed)</em></strong> Open a terminal window and execute: sudo snap install docker</p>
<p><strong><em>Create a Docker Network Named Elastic</em></strong> sudo docker network create elastic <strong><em>Install the Elastic image</em></strong></p>
<p>The version available at the time this was written was 8.14.1. It will probably have changed by the time you get this study guide. The exam only cares about <a href="https://www.elastic.co/training/certification/faq"><u>Elastic version 8.1</u></a>. sudo docker pull docker.elastic.co/elasticsearch/elasticsearch:8.14.1 <strong><em>Run the Elastic image</em></strong></p>
<p>Create a single-node cluster named es01. It will use the Docker network we created above as well as the default HTTP port, transport port, and the Elastic image we just downloaded.</p>
<p>At the very end of the installation there will be output that you need to retain.</p>
<p>sudo docker run --name <strong>es01</strong> --net elastic -p 9200:9200 -p 9300:9300 -e</p>
<p>"discovery.type=single-node" -e "cluster.name=cluster-1" -m 1GB -t docker.elastic.co/elasticsearch/elasticsearch:8.14.1</p>
<p>There will be a lot of output, but at the end of the installation there will be some output that includes:</p>
<ul>
<li><p>the password for user elastic</p></li>
<li><p>the HTTP CA certificate SHA-256 fingerprint</p></li>
<li><p>an enrollment token (you will use it when you set up Kibana)</p></li>
<li><p>another enrollment token used to enroll other nodes (you won’t be using that in this study guide) Just copy the entire block to a text editor and remember where you saved it.</p></li>
</ul>
<p>Note that the name of the container instance is <strong>es01</strong>. You’ll need to remember that when you start the container again later.</p>
<p><strong><em>Pull/Run the Kibana image</em></strong></p>
<p>Open another terminal tab or window as es01 should still be running and waiting to hook up with the Kibana instance.</p>
<p>sudo docker pull docker.elastic.co/kibana/kibana:8.14.1 sudo docker run --name kibana --net elastic -p 5601:5601</p>
<p>docker.elastic.co/kibana/kibana:8.14.1</p>
<p>Notice that the name of the container instance is <strong>kibana</strong>. You’ll need that when you start the container again later.</p>
<p>When you run the Kibana instance (the last command above) the output to the command line will print out a URL to the Kibana instance. The URL will be something like:</p>
<p><a href="http://0.0.0.0:5601/?code=971626"><u>http://0.0.0.0:5601/?code=971626</u></a></p>
<p>The code will probably be different.</p>
<p>Copy and paste the URL into your browser which should open on the following landing page:</p>
<p><img src="media/image4.png" style="width:6.925in;height:6.69375in"></p>
<blockquote class="blockquote">
<p>Figure A-1: Configure Kibana page</p>
</blockquote>
<p>You need to enter the enrollment token that appeared during the execution of es01 (the <strong>Elasticsearch</strong> container instance). Enter the token in the Kibana screen and press <strong>Configure Elastic</strong>. If all goes well the Welcome to Elastic page should appear.</p>
<p><img src="media/image5.png" style="width:6.925in;height:6.69375in"></p>
<p>Figure A-2: The Kibana Login Page to the Elastic Instance Log in with the user name <strong>elastic</strong> and the password from the <strong>es01</strong> output.</p>
<p>Press <strong>Log In</strong>.</p>
<p>A Welcome Home landing page should appear. The first time it will display a dialog asking if you want it to do things for you or if you want to <strong>Explore On Your Own</strong>.</p>
<p>Press <strong>Explore on My Own</strong>.</p>
<p>Press <strong>[hamburger menu] → Management → DevTools</strong></p>
<p>That should open on the <strong>Console</strong> where you will be working through the various examples listed in this book. Enter the following and press the triangle to the right on the line where you entered this:</p>
<p>GET /_cluster/settings</p>
<p>You should get something that looks like this:</p>
<p>{</p>
<p>"persistent": {},</p>
<p>"transient": {}</p>
<p>}</p>
<p>Go celebrate! You have a working Elasticsearch cluster.</p>
<p>To shut it down the first time just press Ctrl-C in each tab/terminal where you have the instances running.</p>
<p>To restart your cluster open another tab or terminal and enter:</p>
<p>sudo docker start es01 kibana</p>
<p>When you decide to stop your cluster enter: sudo docker stop es01 kibana</p>
</section>
<section id="setting-up-an-additional-single-node-cluster-for-cross-cluster-search-ccs" class="level3">
<h3 class="anchored" data-anchor-id="setting-up-an-additional-single-node-cluster-for-cross-cluster-search-ccs">Setting Up An Additional Single-node Cluster for Cross-cluster Search (CCS)</h3>
<p><strong><em>Setting up es01</em></strong></p>
<ol start="13" type="1">
<li><p>docker exec ssh es01 sudo docker exec -it es01 /bin/bash</p></li>
<li><p>create the p12 certificate</p></li>
</ol>
<p># https://www.elastic.co/guide/en/elasticsearch/reference/8.14/security-basic-setup.html</p>
<p>elasticsearch-certutil ca</p>
<p>elasticsearch-certutil cert --ca elastic-stack-ca.p12</p>
<ol start="15" type="1">
<li>move the p12 file into the config/certs directory and modify the file permissions</li>
</ol>
<p>cd config/certs mv ../../elastic-certificates.p12 . chmod ug+rw elastic-certificates.p12</p>
<ol start="16" type="1">
<li>reset the passwords (even if there is none)</li>
</ol>
<p>elasticsearch-keystore add xpack.security.transport.ssl.keystore.secure_password elasticsearch-keystore add xpack.security.transport.ssl.truststore.secure_password</p>
<ol start="17" type="1">
<li>exit the container</li>
</ol>
<p>exit</p>
<ol start="18" type="1">
<li>docker copy the elasticsearch.yml file from <strong>es01</strong></li>
</ol>
<p>sudo docker cp es01:/usr/share/elasticsearch/config/elasticsearch.yml</p>
<p>elasticsearch-es01.yml sudo chmod ugo+rw elasticsearch.yml</p>
<ol start="19" type="1">
<li>Edit elasticsearch-es01.yml:</li>
</ol>
<p>cluster.name: "cluster-1" network.host: 0.0.0.0 node.name: c1-node-1</p>
<p># Enable security features xpack.security.enabled: true xpack.security.enrollment.enabled: false xpack.security.transport.ssl.enabled: true</p>
<p>xpack.security.transport.ssl.verification_mode: certificate xpack.security.transport.ssl.client_authentication: required</p>
<p>xpack.security.transport.ssl.keystore.path: certs/elastic-certificates.p12 xpack.security.transport.ssl.truststore.path: certs/elastic-certificates.p12 xpack.security.authc.token.enabled: false</p>
<p># Enable encryption for HTTP API client connections, such as Kibana, Logstash, and</p>
<p>Agents xpack.security.http.ssl: enabled: false</p>
<p>keystore.path: certs/http.p12</p>
<ol start="20" type="1">
<li>Copy elasticsearch-es01.yml back to es01</li>
</ol>
<p>sudo docker cp elasticsearch-es01.yml</p>
<p>es01:/usr/share/elasticsearch/config/elasticsearch.yml</p>
<ol start="21" type="1">
<li>restart es01 and confirm commication with kibana</li>
</ol>
<p>sudo docker stop es01 kibana sudo docker start es01 kibana</p>
<p>sudo docker logs -f es01 # may need separate terminal sudo docker logs -f kibana # may need separate terminal</p>
<p><strong><em>es02</em></strong></p>
<ol start="22" type="1">
<li>open another tab or terminal and docker run es02</li>
</ol>
<p>sudo docker run --name es02 --net elastic -p 9201:9200 -p 9301:9300 -e</p>
<p>"discovery.type=single-node" -e "cluster.name=cluster-2" -m 1GB -t docker.elastic.co/elasticsearch/elasticsearch:8.14.1</p>
<ol start="23" type="1">
<li>docker copy elastic-certificates.p12 from es01 (both clusters have to have the same transport certificate)</li>
</ol>
<p>sudo docker cp es01:/usr/share/elasticsearch/config/certs/elasticcertificates.p12 .</p>
<ol start="24" type="1">
<li>docker copy elastic-certificates.p12 to es02</li>
</ol>
<p>sudo docker cp elastic-certificates.p12 es02:/usr/share/elasticsearch/config/certs</p>
<ol start="25" type="1">
<li>Copy elasticsearch-es01.yml to elasticsearch-es02.yml</li>
</ol>
<p>cp elasticsearch-es01.ymlcelasticsearch-es02.yml</p>
<ol start="26" type="1">
<li>Edit elasticsearch-es02.yml. The only thing to change is the cluster name and the node name.</li>
</ol>
<p><strong>cluster.name: "cluster-2"</strong> network.host: 0.0.0.0 <strong>node.name: c2-node-1</strong></p>
<p># Enable security features xpack.security.enabled: true xpack.security.enrollment.enabled: false xpack.security.transport.ssl.enabled: true</p>
<p>xpack.security.transport.ssl.verification_mode: certificate xpack.security.transport.ssl.client_authentication: required</p>
<p>xpack.security.transport.ssl.keystore.path: certs/elastic-certificates.p12 xpack.security.transport.ssl.truststore.path: certs/elastic-certificates.p12 xpack.security.authc.token.enabled: false</p>
<p># Enable encryption for HTTP API client connections, such as Kibana, Logstash, and</p>
<p>Agents xpack.security.http.ssl: enabled: false</p>
<p>keystore.path: certs/http.p12</p>
<ol start="27" type="1">
<li><p>Confirm rw permissions to elasticsearch.ymlls -l elasticsearch-es02.yml</p></li>
<li><p>docker copy the modified elasticsearch-es02.yml file to es02</p></li>
</ol>
<p>sudo docker cp elasticsearch-es02.yml</p>
<p>es02:/usr/share/elasticsearch/config/elasticsearch-es02.yml</p>
<ol start="29" type="1">
<li><p>docker exec ssh es02 sudo docker exec -it es02 /bin/bash</p></li>
<li><p>reset the passwords to access the p12 file (even if there is none)</p></li>
</ol>
<p># https://www.elastic.co/guide/en/elasticsearch/reference/8.14/security-basic-</p>
<p>setup.html</p>
<p>elasticsearch-keystore add xpack.security.transport.ssl.keystore.secure_password elasticsearch-keystore add xpack.security.transport.ssl.truststore.secure_password</p>
<ol start="31" type="1">
<li>restart es02</li>
</ol>
<p>sudo docker stop es02 sudo docker start es02</p>
<section id="the-first-time-use-this-to-configure-the-local-cluster-es01-to-recognize-the-remote-cluster-es02" class="level4">
<h4 class="anchored" data-anchor-id="the-first-time-use-this-to-configure-the-local-cluster-es01-to-recognize-the-remote-cluster-es02">32. THE FIRST TIME USE THIS TO CONFIGURE THE LOCAL CLUSTER (ES01) TO RECOGNIZE THE REMOTE CLUSTER (ES02)</h4>
<p># Do this from Kibana -&gt; Management -&gt; DevTools</p>
<p>PUT /_cluster/settings</p>
<p>{</p>
<p>"persistent": {</p>
<p>"cluster": {</p>
<p>"remote": {</p>
<p>"es01": {</p>
<p>"seeds": [</p>
<p>"es01:9300"</p>
<p>],</p>
<p>"skip_unavailable": true</p>
<p>},</p>
<p>"es02": {</p>
<p>"seeds": [</p>
<p>"es02:9300"</p>
<p>],</p>
<p>"skip_unavailable": false</p>
<p>}</p>
<p>}</p>
<p>}</p>
<p>}</p>
<p>}</p>
<p>Go to the Remote Cluster dashboard page. You should see es01 and es02 listed and communication as active.</p>
<p><img src="media/image6.jpg" style="width:6.925in;height:2.34514in"></p>
<p>Figure N: es01 and es02 are communicating and ready for cross-cluster queries.</p>
<p>If you ever feel the need to delete the connection between the two cluster just execute this:</p>
<p>33. AFTER EVERY SESSION YOU MUST DELETE THE CLUSTER SETTINGS AND RESTORE THEM BEFORE STARTING AGAIN:</p>
<p># TO REMOVE THE CLUSTER SETTINGS</p>
<p>PUT /_cluster/settings</p>
<p>{</p>
<p>"persistent": {</p>
<p>"cluster.remote.local.seeds": null,</p>
<p>"cluster.remote.local.skip_unavailable": null,</p>
<p>"cluster.remote.remote.seeds": null,</p>
<p>"cluster.remote.remote.skip_unavailable": null</p>
<p>}</p>
<p>}</p>
</section>
</section>
</section>
<section id="faq" class="level2">
<h2 class="anchored" data-anchor-id="faq">FAQ</h2>
<p><strong>Q: What is the URL for the running instance of Elasticsearch?</strong></p>
<p><strong>A:</strong> On your local machine the URL is usually <a href="https://172.18.0.2:9200/"><u>https://172.18.0.2:9200</u></a> or <a href="https://localhost:9200/"><u>https://localhost:9200</u></a>.</p>
<p>In the Elastic Cloud, after you have created a deployment, you can click on:</p>
<p> [hamburger menu] → Manage this deployment → [takes you to the landing page of your deployment] → Applications → Elasticsearch → Copy endpoint Paste the copied endpoint into a browser and get to work.</p>
<p><strong>Q: How do I run the two docker images of elastic and kibana when I need to restart them?</strong></p>
<p><strong>A:</strong> In a terminal window run:</p>
<p>sudo docker start es01 sudo docker start kibana</p>
<p>Go to the Kibana URL to run all the exercises:</p>
<p>http://0.0.0.0:5601</p>
<p><strong>Q: What is the importance of the @timestamp field?</strong></p>
<p><strong>A:</strong> The <strong>@timestamp</strong> field in Elasticsearch serves a crucial purpose related to time-based data.</p>
<blockquote class="blockquote">
<p>1. <strong>Timestamp for Time-Series Data</strong>:</p>
</blockquote>
<ul>
<li><p>Elasticsearch often deals with time-series data, where each document represents an event or record associated with a specific timestamp (e.g., log entries, sensor readings, transactions).</p></li>
<li><p>The @timestamp field explicitly indicates when the document was created or when the event occurred.</p></li>
</ul>
<blockquote class="blockquote">
<p>7. <strong>Data Streams and Rollover Policies</strong>:</p>
</blockquote>
<ul>
<li><p>When using <strong>data streams</strong>, which handle append-only time series, the @timestamp field is mandatory.</p></li>
<li><p>Data streams manage collections of documents with a time dimension. Having an explicit timestamp field allows Elasticsearch to apply time-based rollover policies.</p></li>
<li><p>Rollover policies create new write indices (current write index) and backing indices (for historical data) based on time intervals or document count thresholds.</p></li>
<li><p>The @timestamp field ensures that data streams can efficiently manage these indices.</p></li>
</ul>
<blockquote class="blockquote">
<p>8. <strong>Write and Backing Indices</strong>:</p>
</blockquote>
<ul>
<li><p>Writes are directed to the current write index, while reads can access all backing indices.</p></li>
<li><p>The @timestamp field plays a key role in determining which indices contain relevant data for a given time range.</p></li>
<li><p>Without this field, Elasticsearch wouldn’t know how to organize data into time-based segments.</p></li>
</ul>
<blockquote class="blockquote">
<p>9. <strong>Mapping and Default Options</strong>:</p>
</blockquote>
<ul>
<li><p>Every document indexed to a data stream must contain an @timestamp field.</p></li>
<li><p>By default, Elasticsearch maps @timestamp as a date field with default options.</p></li>
<li><p>You can customize the mapping if needed, but having the field is essential for proper data stream functioning.</p></li>
</ul>
<p>In summary, the @timestamp field ensures that Elasticsearch can effectively manage time-series data, apply rollover policies, and organize indices based on time intervals. <a href="https://stackoverflow.com/questions/68317063/what-is-the-use-of-the-mandatory-timestamp-field-in-elasticsearch-datastream"><u>It’s a fundamental part of</u> <u>handling time-based data in Elasticsearch3</u></a> <a href="https://stackoverflow.com/questions/21292284/is-the-timestamp-field-needed-when-using-logstash-to-store-in-elasticsearch"><u>4</u></a> . If you’re working with logs, events, or any time-stamped data, the @timestamp field becomes critical for accurate indexing and querying.</p>
</section>
<section id="devtools-console-auto-complete" class="level2">
<h2 class="anchored" data-anchor-id="devtools-console-auto-complete">DevTools Console Auto-complete</h2>
<p>This is all about auto-complete. The more you know of the various nodes needed by the REST API call you are trying to make the quicker you can get back to completing your exercise.</p>
<p>The Console where you enter your REST API calls to Elasticsearch has a number of keyboard shortcuts to help you fill out the JSON that needs to be sent with most calls. Here is a list of the keyboard shortcuts in no particular order.</p>
<p>On a new line the first thing the auto-complete will do is fill in the HTTP command as soon as you <strong>enter one letter</strong> (press <strong>Enter</strong> after selecting one of the choices):</p>
<p><img src="media/image7.jpg" style="width:6.925in;height:2.60486in"></p>
<p>Figure N:</p>
<p>As soon as you press another key another dropdown will open giving you more choices. For example, pressing slash (/):</p>
<blockquote class="blockquote">
<p><img src="media/image8.jpg" style="width:6.56111in;height:2.71806in"></p>
</blockquote>
<p>Figure N:</p>
<p>Pressing dot(.):</p>
<blockquote class="blockquote">
<p><img src="media/image9.jpg" style="width:6.56111in;height:2.71806in"></p>
</blockquote>
<p>Figure N:</p>
<p>Pressing any alphabetic key (a-z):</p>
<blockquote class="blockquote">
<p><img src="media/image10.jpg" style="width:6.56111in;height:2.71806in"></p>
</blockquote>
<p>Figure N:</p>
<p>Notice how pressing practically any letter will who results with the letter that matches being highlighted:</p>
<blockquote class="blockquote">
<p><img src="media/image11.jpg" style="width:6.56111in;height:2.71806in"></p>
</blockquote>
<p>Figure N:</p>
<p>It will also list full word matches as well:</p>
<blockquote class="blockquote">
<p><img src="media/image12.jpg" style="width:6.56111in;height:1.48958in"></p>
</blockquote>
<p>Figure N:</p>
<p>When you enter a single curly brace to open up a JSON node you will see a white X in a red box:</p>
<blockquote class="blockquote">
<p><img src="media/image13.jpg" style="width:6.56111in;height:1.48958in"></p>
</blockquote>
<p>Figure N:</p>
<p>Fear not! Press Enter and the Console editor will add the closing curly brace and indent the position of the cursor so you can type your next line:</p>
<blockquote class="blockquote">
<p><img src="media/image14.jpg" style="width:6.56111in;height:1.48958in"></p>
</blockquote>
<p>Figure N:</p>
<p>To determine what the allowable names are press open quote (“):</p>
<p><img src="media/image15.jpg" style="width:6.925in;height:2.65278in"></p>
<p>Figure N:</p>
<p>If you selected index_patterns it would complete the line for you:</p>
<p><img src="media/image16.jpg" style="width:6.925in;height:1.26389in"></p>
<p>Figure N:</p>
<p>Unfortunately, not all of the node types will appear. Notice, for this example, dynamic_template does not appear after mappings even though it is meant to be used after mappings in the creation of a dynamic template:</p>
<p><img src="media/image17.jpg" style="width:6.925in;height:2.28889in"></p>
<p>Figure N:</p>
<p>Once you start entering node information for an unrecognized node the auto-complete will stop working. I’m sure there is a way to fix that, but I have not found it. <strong>Be aware.</strong></p>
<p>Other valid attributes that don’t appear in auto-complete:</p>
<blockquote class="blockquote">
<p>• terms_set</p>
</blockquote>
<p>You can select the Settings tab to change your Console editor settings:</p>
<p><img src="media/image18.jpg" style="width:6.925in;height:2.69097in"></p>
<p>Figure N:</p>
<p><img src="media/image19.jpg" style="width:6.925in;height:4.53194in"></p>
<p>Figure N:</p>
<p>Or you can select the <strong>Help</strong> tab to look at the full list of supported keyboard commands:</p>
<p><img src="media/image18.jpg" style="width:6.925in;height:2.69097in"></p>
<p>Figure N:</p>
<p><img src="media/image20.jpg" style="width:6.925in;height:3.89722in"></p>
<p>Figure N:</p>
<p><strong><em>Random cut and paste stuff</em></strong></p>
<p><strong><em>Test</em></strong></p>
<ol type="1">
<li>Verify the index creation</li>
</ol>
<blockquote class="blockquote">
<p>GET [index name] or GET /_cat/indices</p>
</blockquote>
<ol start="2" type="1">
<li><p>Verify the field mappings GET /[index name]/_mapping</p></li>
<li><p>Index and search sample data:</p></li>
</ol>
<blockquote class="blockquote">
<p>◦ Index</p>
<p>POST /[index name]/_doc</p>
<p>{</p>
<p>[field name] : [value]</p>
<p>[field name] : [value]</p>
<p>}</p>
<p>◦ Search</p>
<p>GET /[index name]/_search?q=[field name]:[value]*</p>
</blockquote>
<ol start="4" type="1">
<li>Any other appropriate tests</li>
</ol>
<blockquote class="blockquote">
<p>[CODE HERE]</p>
</blockquote>
<p>========</p>
<p><strong>To check out the cluster from either a browser or using curl</strong></p>
<p>For example If you are running a local cluster then you know your username/password. You should also know your endpoint as it will look something like:</p>
<p>localhost:9200/[paths based on what you are trying to do]</p>
<p>The port might be different based on any customizations you might have made when you installed the cluster. Check that you can get to it by opening a command line window and run:</p>
<p>curl -u [your username]:[your password] -X GET "localhost:9200/nonexistent/_search? pretty"</p>
<p>You should get an error message from your cluster (unless you have an index called <strong>nonexistent</strong>) that looks something like this:</p>
<p>{</p>
<p>"error" : {</p>
<p>"root_cause" : [</p>
<p>{</p>
<p>"type" : "index_not_found_exception",</p>
<p>"reason" : "no such index [nonexistent]",</p>
<p>"resource.type" : "index_or_alias",</p>
<p>"resource.id" : "nonexistent",</p>
<p>"index_uuid" : "_na_",</p>
<p>"index" : "nonexistent"</p>
<p>}</p>
<p>],</p>
<p>"type" : "index_not_found_exception",</p>
<p>"reason" : "no such index [nonexistent]",</p>
<p>"resource.type" : "index_or_alias",</p>
<p>"resource.id" : "nonexistent",</p>
<p>"index_uuid" : "_na_",</p>
<p>"index" : "nonexistent"</p>
<p>},</p>
<p>"status" : 404</p>
<p>}</p>
<p>With all that said, at some point you need to stop the containers and restart them at a later time (like when you want to get some sleep):</p>
<ul>
<li><p>Ctrl+C to stop the containers (doesn’t matter which you stop first)</p></li>
<li><p>In one terminal window start Elasticsearch</p></li>
</ul>
<blockquote class="blockquote">
<p>docker start es01 #or whatever name you gave the container</p>
</blockquote>
<ul>
<li>In another terminal window start Kibana</li>
</ul>
<blockquote class="blockquote">
<p>docker start kibana # or whatever name you gave the containers</p>
</blockquote>
<p>Give it a minute or so and you should be able to see the login page again.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./5-cluster-management.html" class="pagination-link" aria-label="Cluster Management">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Cluster Management</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./references.html" class="pagination-link" aria-label="References">
        <span class="nav-page-text">References</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>